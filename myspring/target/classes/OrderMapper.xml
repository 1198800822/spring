<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sundd.myspring.mapper.OrderMapper">
	<sql id="cols">
		t_order.id as order_id,
		t_order.name as order_name,
		t_order.price as order_price,
		t_order.date as order_date,
		t_order.user_id as order_user_id
	</sql>
	<resultMap type="order" id="orderMap">
		<result property="id" column="order_id" />
		<result property="name" column="order_name" />
		<result property="price" column="order_price" />
		<result property="date" column="order_date" />
		<result property="userId" column="order_user_id" />
	</resultMap>
	<resultMap type="order" id="orderUserMap" extends="orderMap">
		<association property="user" resultMap="com.sundd.myspring.mapper.UserMapper.userMap" fetchType="eager"></association>	
	</resultMap>
	
	<select id="get" resultMap="orderMap">
		select
		<include refid="cols"></include>
		from t_order
		where
		t_order.user_id=#{id}
	</select>

<!-- 
	<select id="get" resultMap="orderMap">
		select
		<include refid="cols"></include>
		,
		<include refid="com.sundd.myspring.mapper.UserMapper.cols"></include>
		from t_order left join t_user on t_order.user_id = t_user.id
		where
		t_order.id=#{id}
	</select>
 -->

</mapper>
